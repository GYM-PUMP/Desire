<div class ="container">
		<div class = "row">
			<div class="col-xs-8 col-xs-offset-2">
				<h2 class="elementor-heading-title">USERS:</h2>
				<table class="table">
				<thead>
					<tr>
						<th>image</th>
						<th>name</th>
						<th colspan="3"></th>
						<th></th>
						<th></th>
					</tr>
				</thead>

				<tbody>
					<% @users.each do |user| %>
					　 <% if current_user.id != user.id %>
						  <% if user.user_status == true %>
							<tr>
								<td><%= attachment_image_tag(user, :image, :fill, 50, 50, fallback: "no_image.jpg") %></td>
								<td><%= user.name%></td>
								<td>
									FOLLOW <%= link_to "#{user.follower.map(&:followed).select{ |f| f.user_status == true }.count}",follow_users_user_path(user.id) %><!-- mapでユーザーをフォローしているユーザーを取り出しselectでmapで取り出したデータの中からさらにuser_statusがtrueのものだけ取ってくる様に指定-->
								</td>
								<td>
									FOLLOWER <%= link_to "#{user.followed.map(&:follower).select{ |f| f.user_status == true }.count}",follower_users_user_path(user.id) %>
								</td>
								<td><% if current_user.id != user.id %>
										<% if current_user.following?(user) %>
											<%= link_to 'UN FOLLOW', users_user_relationships_path(user.id), method: :DELETE, class: "btn-sm btn-danger" %>
										 <% else %>
										 	<%= link_to 'FOLLOW', users_user_relationships_path(user.id), method: :POST, class: "btn-sm btn-success" %>
										<% end %>
									<% end %>
								</td>
								<td><%= link_to "PROFILE", users_user_path(user), class: "user_#{user.id}" %></td>
							</tr>
						  <% end %>
					   <% end %>
					<% end %>
				</tbody>
			</table>
		</div>
	</div>
</div>
